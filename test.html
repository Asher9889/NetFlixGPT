<!-- <!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>

    <script>
        const options = {
            method: 'GET',
            headers: {
                accept: 'application/json',
                Authorization: "Bearer " + "eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiI5NmMxYzU3NDYwYTZmODNhOWQ1NzViYTQ0MDEzNDVlYiIsIm5iZiI6MTcyMjc2NDI3OS41MDQzNDEsInN1YiI6IjY2MWUzMzQ1Yjg0Y2RkMDE3ZDY0MGU2MiIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.0te5AxmlN0cLX2mFSm5UkMhS9UMHsMFfsI9qraiVZtc",
            }
        };


      

        async function fetchAllMovies() {
            const res = await fetch("https://api.themoviedb.org/3/movie/now_playing", options)
            const allMovies = await res.json();

            return allMovies.results;
        }

         async function fetchVideo(id) {
           try {
             const res = await fetch("https://api.themoviedb.org/3/movie/" + id + "/videos", options)
             const data = await res.json();
             return data.results;
           } catch (error) {
                console.log('Error during fetchVideo call')
           }
        }

        async function fetchAllMoviesVideos() {
           try {
               console.log("all movie data is fetching")
             const allMovieData = await fetchAllMovies();
           
             if (allMovieData) {
                console.log(allMovieData)
                console.log("ids is fetching")
                 const ids = allMovieData?.map((m, i) => m.id)
                 console.log(ids)
                 const allVideosApi = ids?.map((id, i) => fetchVideo(id))
                 console.log("all api is : ", allVideosApi)
                 console.log("Now all videos is fetching")
                 const results = await Promise.all(allVideosApi)
                 if(results){

                     console.log("All videos is; ", results)
                     finaldata = allMovieData.map((movie, i) => ({...movie, video: results[i]}))
                    console.log(finaldata)
                    }
             }
           } catch (error) {
            console.log("error happed ", error)
           }

        }


        fetchAllMoviesVideos()

        console.log(finalData)
        

        

        


    </script>
</body>

</html> -->